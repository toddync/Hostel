<script lang="ts">
	//@ts-nocheck
	import RoomsTable from "$lib/RoomsTable.svelte";
	import SpotsTable from "$lib/SpotsTable.svelte";
	import VacancyChart from "$lib/VacancyChart.svelte";
	import { onMount } from "svelte";
	import { writable } from "svelte/store";
	import { pb } from "../../pb";
	import RoomsModal from "$lib/RoomsModal.svelte";
	import SpotsModal from "$lib/SpotsModal.svelte";

	let Vagas = writable([]);
	let Quartos = writable([]);

	onMount(async () => {
		$Quartos = await pb.collection("quartos").getFullList({});
		$Vagas = await pb.collection("vagas").getFullList({});
	});
</script>

<div class="wrapper w-svw">
	<div class="left-side">
		<svg
			fill="currentColor"
			viewBox="0 0 1024 1024"
			stroke-width="2"
			stroke-linecap="round"
			stroke-linejoin="round"
		>
			<path
				d="M789.3 513.2c31.1 0 56.5 3.6 75.5 10.7 14.5 5.4 25.2 12.8 32.7 22.6 13.9 18 19.8 46.3 19.8 94.7v213.3h-42.7v-21.3c0-35.3-28.7-64-64-64H213.3c-35.3 0-64 28.7-64 64v21.3h-42.7V641.2c0-48.3 5.9-76.6 19.8-94.7 7.6-9.8 18.3-17.2 32.7-22.6 19-7.1 44.4-10.7 75.5-10.7h554.7m0-42.7H234.7C83.5 470.5 64 546.9 64 641.2v213.3c0 23.6 19.1 42.7 42.7 42.7h42.7c23.6 0 42.7-19.1 42.7-42.7v-21.3c0-11.8 9.6-21.3 21.3-21.3h597.3c11.8 0 21.3 9.6 21.3 21.3v21.3c0 23.6 19.1 42.7 42.7 42.7h42.7c23.6 0 42.7-19.1 42.7-42.7V641.2c-0.1-94.3-19.6-170.7-170.8-170.7z"
			/>
			<path
				d="M512 169.5c44.3 0 87 7.4 123.5 21.5 32.6 12.6 59.1 30.2 74.6 49.7l10 12.5 15.7 2.9c8.8 1.6 18.3 3.3 28.3 5.1 13.4 2.4 27.3 4.8 41.2 7.4 40.2 7.5 69.3 42.8 69.3 83.8v131.3c-29.2-8.7-60.2-13.2-85.3-13.2H234.7c-25.2 0-56.1 4.5-85.3 13.2V352.4c0-41 29.2-76.3 69.3-83.8 13.9-2.6 27.8-5.1 41.2-7.4 10.1-1.8 19.5-3.4 28.3-5.1l15.7-2.9 10-12.5c15.5-19.5 41.9-37.1 74.6-49.7 36.5-14.1 79.2-21.5 123.5-21.5m0-42.7c-102.5 0-190.6 35.8-231.5 87.3-20.3 3.7-45 7.9-69.7 12.5-60.4 11.3-104.1 64.3-104.1 125.8v198.3c29.2-23.5 87.6-37.6 128-37.6h554.7c40.4 0 98.8 14.1 128 37.6V352.4c0-61.5-43.7-114.4-104.1-125.8-24.6-4.6-49.4-8.8-69.7-12.5-41-51.5-129.1-87.3-231.6-87.3z"
			/>
			<path
				d="M177.1 516.3l7.8-28.9c7.9-29.4 29.4-55.9 60.5-74.5 30-17.9 67.8-27.7 106.6-27.7 39 0 75.6 9.5 105.9 27.4 31 18.3 52.6 44.4 60.9 73.4l7.7 27.2H234.7c-8.9 0-18 0.3-27.7 1l-29.9 2.1z m64.5-45.8h220.8c-6.9-7.9-15.8-15.1-26.2-21.2-23.4-13.8-53.3-21.5-84.2-21.5-31.2 0-61.3 7.7-84.7 21.7-10.3 6.2-18.9 13.3-25.7 21z"
			/>
			<path
				d="M846.9 516.3l-29.8-2.1c-9.8-0.7-18.8-1-27.7-1h-292l7.7-27.2c8.3-29 29.9-55.1 60.9-73.4 30.3-17.9 67-27.4 105.9-27.4 38.8 0 76.7 9.9 106.6 27.7 31.1 18.6 52.7 45 60.5 74.5l7.9 28.9z m-285.3-45.8h220.8c-6.8-7.8-15.5-14.9-25.7-21-23.4-14-53.5-21.7-84.7-21.7-30.9 0-60.8 7.6-84.2 21.5-10.5 6.2-19.3 13.3-26.2 21.2z"
			/>
		</svg>
		<svg
			fill="none"
			viewBox="0 0 24 24"
			stroke="currentColor"
			stroke-width="1.5"
			stroke-linecap="round"
			stroke-linejoin="round"
		>
			<path
				d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"
			/></svg
		>
		<svg viewBox="0 1 511 512" fill="currentColor">
			<path
				d="M498.7 222.7L289.8 13.8a46.8 46.8 0 00-66.7 0L14.4 222.6l-.2.2A47.2 47.2 0 0047 303h8.3v153.7a55.2 55.2 0 0055.2 55.2h81.7a15 15 0 0015-15V376.5a25.2 25.2 0 0125.2-25.2h48.2a25.2 25.2 0 0125.1 25.2V497a15 15 0 0015 15h81.8a55.2 55.2 0 0055.1-55.2V303.1h7.7a47.2 47.2 0 0033.4-80.4zm-21.2 45.4a17 17 0 01-12.2 5h-22.7a15 15 0 00-15 15v168.7a25.2 25.2 0 01-25.1 25.2h-66.8V376.5a55.2 55.2 0 00-55.1-55.2h-48.2a55.2 55.2 0 00-55.2 55.2V482h-66.7a25.2 25.2 0 01-25.2-25.2V288.1a15 15 0 00-15-15h-23A17.2 17.2 0 0135.5 244L244.4 35a17 17 0 0124.2 0l208.8 208.8v.1a17.2 17.2 0 010 24.2zm0 0"
			/></svg
		>
		<svg viewBox="0 0 512 512" fill="currentColor">
			<path
				d="M467 76H45a45 45 0 00-45 45v270a45 45 0 0045 45h422a45 45 0 0045-45V121a45 45 0 00-45-45zm-6.3 30L287.8 278a44.7 44.7 0 01-63.6 0L51.3 106h409.4zM30 384.9V127l129.6 129L30 384.9zM51.3 406L181 277.2l22 22c14.2 14.1 33 22 53.1 22 20 0 38.9-7.9 53-22l22-22L460.8 406H51.3zM482 384.9L352.4 256 482 127V385z"
			/></svg
		>
		<svg viewBox="0 0 512 512" fill="currentColor">
			<path
				d="M272 512h-32c-26 0-47.2-21.1-47.2-47.1V454c-11-3.5-21.8-8-32.1-13.3l-7.7 7.7a47.1 47.1 0 01-66.7 0l-22.7-22.7a47.1 47.1 0 010-66.7l7.7-7.7c-5.3-10.3-9.8-21-13.3-32.1H47.1c-26 0-47.1-21.1-47.1-47.1v-32.2c0-26 21.1-47.1 47.1-47.1H58c3.5-11 8-21.8 13.3-32.1l-7.7-7.7a47.1 47.1 0 010-66.7l22.7-22.7a47.1 47.1 0 0166.7 0l7.7 7.7c10.3-5.3 21-9.8 32.1-13.3V47.1c0-26 21.1-47.1 47.1-47.1h32.2c26 0 47.1 21.1 47.1 47.1V58c11 3.5 21.8 8 32.1 13.3l7.7-7.7a47.1 47.1 0 0166.7 0l22.7 22.7a47.1 47.1 0 010 66.7l-7.7 7.7c5.3 10.3 9.8 21 13.3 32.1h10.9c26 0 47.1 21.1 47.1 47.1v32.2c0 26-21.1 47.1-47.1 47.1H454c-3.5 11-8 21.8-13.3 32.1l7.7 7.7a47.1 47.1 0 010 66.7l-22.7 22.7a47.1 47.1 0 01-66.7 0l-7.7-7.7c-10.3 5.3-21 9.8-32.1 13.3v10.9c0 26-21.1 47.1-47.1 47.1zM165.8 409.2a176.8 176.8 0 0045.8 19 15 15 0 0111.3 14.5V465c0 9.4 7.7 17.1 17.1 17.1h32.2c9.4 0 17.1-7.7 17.1-17.1v-22.2a15 15 0 0111.3-14.5c16-4.2 31.5-10.6 45.8-19a15 15 0 0118.2 2.3l15.7 15.7a17.1 17.1 0 0024.2 0l22.8-22.8a17.1 17.1 0 000-24.2l-15.7-15.7a15 15 0 01-2.3-18.2 176.8 176.8 0 0019-45.8 15 15 0 0114.5-11.3H465c9.4 0 17.1-7.7 17.1-17.1v-32.2c0-9.4-7.7-17.1-17.1-17.1h-22.2a15 15 0 01-14.5-11.2c-4.2-16.1-10.6-31.6-19-45.9a15 15 0 012.3-18.2l15.7-15.7a17.1 17.1 0 000-24.2l-22.8-22.8a17.1 17.1 0 00-24.2 0l-15.7 15.7a15 15 0 01-18.2 2.3 176.8 176.8 0 00-45.8-19 15 15 0 01-11.3-14.5V47c0-9.4-7.7-17.1-17.1-17.1h-32.2c-9.4 0-17.1 7.7-17.1 17.1v22.2a15 15 0 01-11.3 14.5c-16 4.2-31.5 10.6-45.8 19a15 15 0 01-18.2-2.3l-15.7-15.7a17.1 17.1 0 00-24.2 0l-22.8 22.8a17.1 17.1 0 000 24.2l15.7 15.7a15 15 0 012.3 18.2 176.8 176.8 0 00-19 45.8 15 15 0 01-14.5 11.3H47c-9.4 0-17.1 7.7-17.1 17.1v32.2c0 9.4 7.7 17.1 17.1 17.1h22.2a15 15 0 0114.5 11.3c4.2 16 10.6 31.5 19 45.8a15 15 0 01-2.3 18.2l-15.7 15.7a17.1 17.1 0 000 24.2l22.8 22.8a17.1 17.1 0 0024.2 0l15.7-15.7a15 15 0 0118.2-2.3z"
			/>
			<path
				d="M256 367.4c-61.4 0-111.4-50-111.4-111.4s50-111.4 111.4-111.4 111.4 50 111.4 111.4-50 111.4-111.4 111.4zm0-192.8a81.5 81.5 0 000 162.8 81.5 81.5 0 000-162.8z"
			/></svg
		>
		<svg viewBox="0 0 512 512" fill="currentColor">
			<path
				d="M255.2 468.6H63.8a21.3 21.3 0 01-21.3-21.2V64.6c0-11.7 9.6-21.2 21.3-21.2h191.4a21.2 21.2 0 100-42.5H63.8A63.9 63.9 0 000 64.6v382.8A63.9 63.9 0 0063.8 511H255a21.2 21.2 0 100-42.5z"
			/>
			<path
				d="M505.7 240.9L376.4 113.3a21.3 21.3 0 10-29.9 30.3l92.4 91.1H191.4a21.2 21.2 0 100 42.6h247.5l-92.4 91.1a21.3 21.3 0 1029.9 30.3l129.3-127.6a21.3 21.3 0 000-30.2z"
			/></svg
		>
	</div>
	<div class="main-container w-full pb-10">
		<div class="user-box gap-5 grid lg:grid-cols-2">
			<div class="activity card !w-full bg-red-900" style="--delay: .2s">
				<div class="title">Lotação</div>
				<VacancyChart />
			</div>

			<div class="activity card w-full" style="--delay: .4s">
				<div class="title">Buscas</div>
				<VacancyChart />
			</div>
		</div>

		<div class="user-box grid gap-5">
			<SpotsTable {Quartos} {Vagas} />
			<RoomsTable {Quartos} {Vagas} />
		</div>
	</div>
</div>
<RoomsModal />
<SpotsModal Quartos={$Quartos} />
